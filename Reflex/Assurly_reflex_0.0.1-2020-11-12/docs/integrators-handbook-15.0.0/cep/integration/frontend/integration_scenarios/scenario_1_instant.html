<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 at 2020-09-25 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200925" />
    <meta http-equiv="Content-Language" content="en" />
    <title>ReFlex ReFlex Integrator's Handbook &#x2013; Scenario 1: CEP UI as standalone web application</title>
    <link rel="stylesheet" href="../../../../css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="../../../../css/site.css" />
    <link rel="stylesheet" href="../../../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../../../js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://www.hannover-re.com/" id="bannerLeft">
                                                                                                <img src="../../../../images/logo.svg"  alt="HannoverRe"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="https://www.hannover-re.com/" id="bannerRight">
                                                                                                <img src="../../../../images/hre-logo.svg"  alt="HannoverRe_log"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 15.0.0
                    </li>
              
              
                  <li id="publishDate" class="pull-right">Last Published: 2020-09-25</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                          
      <li>
  
                          <a href="../../../../index.html" title="Document Information">
          <span class="none"></span>
        Document Information</a>
            </li>
                                                                                                                                                            
      <li>
  
                          <a href="../../../../reflex-overview/index.html" title="ReFlex Overview">
          <span class="icon-chevron-right"></span>
        ReFlex Overview</a>
                  </li>
                
      <li>
  
                          <a href="../../../../installation-guide.html" title="Installation Guide">
          <span class="none"></span>
        Installation Guide</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../../../update-guide/index.html" title="Update Guide">
          <span class="icon-chevron-right"></span>
        Update Guide</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="../../../../use-cases/index.html" title="Use Cases">
          <span class="icon-chevron-right"></span>
        Use Cases</a>
                  </li>
                              <li class="nav-header">RAS documentation</li>
                              
      <li>
  
                          <a href="../../../../ras/overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../../../ras/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                                                                                                      
      <li>
  
                          <a href="../../../../ras/general-notes/index.html" title="General Notes">
          <span class="icon-chevron-right"></span>
        General Notes</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="../../../../ras/rest-resources/index.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="../../../../ras/usage-scenarios/index.html" title="Usage Scenarios">
          <span class="icon-chevron-right"></span>
        Usage Scenarios</a>
                  </li>
                                                                                                                                          
      <li>
  
                          <a href="../../../../ras/known-issues/index.html" title="Known Issues">
          <span class="icon-chevron-right"></span>
        Known Issues</a>
                  </li>
                              <li class="nav-header">CEP documentation</li>
                              
      <li>
  
                          <a href="../../../../cep/integration/integration_mechanism.html" title="Integration Mechanism">
          <span class="none"></span>
        Integration Mechanism</a>
            </li>
                                                                                                                                                                                          
      <li>
  
                          <a href="../../../../cep/integration/backend/index.html" title="Back End Integration">
          <span class="icon-chevron-right"></span>
        Back End Integration</a>
                  </li>
                                                                                                                                                                                                                                  
      <li>
  
                          <a href="../../../../cep/integration/frontend/index.html" title="Front End Integration">
          <span class="icon-chevron-down"></span>
        Front End Integration</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Standalone Web App</a>
          </li>
                    
      <li>
  
                          <a href="../../../../cep/integration/frontend/integration_scenarios/scenario_2_angular.html" title="Embedded in an AngularJS App">
          <span class="none"></span>
        Embedded in an AngularJS App</a>
            </li>
                    
      <li>
  
                          <a href="../../../../cep/integration/frontend/integration_scenarios/scenario_3_wo_angular.html" title="Embedded in a Non-AngularJS App">
          <span class="none"></span>
        Embedded in a Non-AngularJS App</a>
            </li>
                    
      <li>
  
                          <a href="../../../../cep/integration/frontend/configuration/index.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                                                                                                                            
      <li>
  
                          <a href="../../../../cep/integration/frontend/customization/index.html" title="Customization">
          <span class="icon-chevron-right"></span>
        Customization</a>
                  </li>
              </ul>
        </li>
                                                                                    
      <li>
  
                          <a href="../../../../cep/integration/features/index.html" title="Optional Features">
          <span class="icon-chevron-right"></span>
        Optional Features</a>
                  </li>
                                                                                                                              
      <li>
  
                          <a href="../../../../cep/integration/operations/index.html" title="Operations">
          <span class="icon-chevron-right"></span>
        Operations</a>
                  </li>
                
      <li>
  
                          <a href="../../../../cep/integration/known_issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">DCS documentation</li>
                              
      <li>
  
                          <a href="../../../../dcs/index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="../../../../dcs/configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="../../../../dcs/rest-api.html" title="REST API">
          <span class="none"></span>
        REST API</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../../../dcs/template-config/template-configuration.html" title="Template Configuration">
          <span class="icon-chevron-right"></span>
        Template Configuration</a>
                  </li>
                
      <li>
  
                          <a href="../../../../dcs/known-issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">RSP documentation</li>
                                                                                                                                                        
      <li>
  
                          <a href="../../../../rsp/integration/integration.html" title="Integration">
          <span class="icon-chevron-right"></span>
        Integration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../../../rsp/configuration/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                              <li class="nav-header">MI documentation</li>
                              
      <li>
  
                          <a href="../../../../mi/installation/app-queue.html" title="AppQueue Installation">
          <span class="none"></span>
        AppQueue Installation</a>
            </li>
                                                                                    
      <li>
  
                          <a href="../../../../mi/index.html" title="Data export">
          <span class="icon-chevron-right"></span>
        Data export</a>
                  </li>
                              <li class="nav-header">3PS documentation</li>
                              
      <li>
  
                          <a href="../../../../tps/overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                                                                        
      <li>
  
                          <a href="../../../../tps/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="../../../../tps/api.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                              <li class="nav-header">UWB documentation</li>
                              
      <li>
  
                          <a href="../../../../uwb/index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                  
      <li>
  
                          <a href="../../../../uwb/installation/index.html" title="Installation">
          <span class="icon-chevron-right"></span>
        Installation</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="../../../../uwb/configuration/application/index.html" title="Application Configuration">
          <span class="icon-chevron-right"></span>
        Application Configuration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../../../uwb/configuration/office/index.html" title="Office Configuration">
          <span class="icon-chevron-right"></span>
        Office Configuration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../../../uwb/features/index.html" title="Advanced Features">
          <span class="icon-chevron-right"></span>
        Advanced Features</a>
                  </li>
                                                                  
      <li>
  
                          <a href="../../../../uwb/operations/index.html" title="Operations">
          <span class="icon-chevron-right"></span>
        Operations</a>
                  </li>
                
      <li>
  
                          <a href="../../../../uwb/known_issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">MIGRATION documentation</li>
                              
      <li>
  
                          <a href="../../../../migration/index.html" title="User Guide">
          <span class="none"></span>
        User Guide</a>
            </li>
                              <li class="nav-header">Appendix</li>
                              
      <li>
  
                          <a href="../../../../glossary.html" title="Glossary">
          <span class="none"></span>
        Glossary</a>
            </li>
                
      <li>
  
                          <a href="../../../../component-versions.html" title="Component Versions">
          <span class="none"></span>
        Component Versions</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="../../../../release-migration-notes.html" title="Release And Migration Notes">
          <span class="icon-chevron-right"></span>
        Release And Migration Notes</a>
                  </li>
                
      <li>
  
                          <a href="../../../../changelog.html" title="Changelog">
          <span class="none"></span>
        Changelog</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Scenario 1: CEP UI as standalone web application</h1>
<p>The CEP dynamic questionnaire can be hosted as a standalone web application on a regular web-server that is capable of delivering files via HTTP/1.1 (e.g. Apache 2, NginX, Tomcat, IIS).</p>
<p>To be both highly configurable and highly optimised for web hosting, this integration scenario ships with a browser-based build-tool that allows an integrator to tailor the questionnaire to its needs and pack it into a zip file that can be deployed on regular Web-Servers, CDNs or even servlet containers.</p>
<blockquote>

<p>NOTE: The questionnaire application must be served on the same domain as the CEP back end services due to restrictions in cross-origin communication.</p>
</blockquote><section>
<h2><a name="Limitations"></a>Limitations</h2>
<p>This deployment scenario currently has several limitations:</p>
<ul>

<li>Multiple languages are <b>not supported</b></li>
<li>Suspend &amp; Resume is <b>not supported</b></li>
</ul></section><section>
<h2><a name="Building_the_questionnaire"></a>Building the questionnaire</h2>
<p>The questionnaire is shipped as an archive file <i>com.hannoverre.reflex.cep.instant-VERSION.zip</i>. It contains the following artefacts:</p>
<ul>

<li><i>build-tool.html</i></li>
<li><i>build-components</i>
<ul>

<li>base.scss</li>
<li>configuration.json</li>
<li>index.html</li>
<li>portal.js</li>
<li>translation.json</li>
<li>questionnaire.zip</li>
</ul>
</li>
</ul>
<p>The <i>build-components</i> contains all files that are meant to be customized by the integrator. An exception is the <i>questionnaire.zip</i> which is a pre-bundled version of the questionnaire yarn component.</p>
<p>To build the questionnaire, extract the <i>com.hannoverre.reflex.cep.instant-VERSION.zip</i> archive and open the <i>build-tool.html</i> in your local browser, fill the build tools form with the appropriate files from the <i>build-components</i> directory and select the appropriate language key that represents the language of the <i>build-components/translation.json</i> (e.g. <i>en</i> or <i>de_DE</i>).</p>
<p>This build-tool supports Chrome and Firefox as browsers (but others should work fine too). Note that this build-tool is self-contained and does not need any server or online connectivity.</p>
<p><img src="../../../images/integration/core/frontend/integration_scenarios/instant-build-tool-finished.png" alt="Instant CEP Build Tool User Interface" /></p>
<p>Then press the <b>Build CEP</b> button and the build tool will perform sanity checks, process and compact all assets and eventually provide you a zip file <i>cep-ui-custom-TIMESTAMP.zip</i> for download.</p>
<p><img src="../../../images/integration/core/frontend/integration_scenarios/instant-build-tool-success.png" alt="Instant CEP Build Tool User Interface" /></p>
<p>The downloaded zip file is ready for deployment.</p></section><section>
<h2><a name="Configuring_the_questionnaire"></a>Configuring the questionnaire</h2>
<p>The questionnaire is configured using the <i>build-components/configuration.json</i> file. This file contains solid default values that can be adjusted if required. Chapter <a href="../configuration/index.html">Configuring the cep-questionnaire component <i>questionnaireConfig</i></a> describes the supported configuration keys. All keys described in that section except <code>assessmentViewPath</code> and <code>assessmentViewUrlPath</code> are applicable to the <i>build-components/configuration.json</i> file.</p></section><section>
<h2><a name="Translating_the_questionnaire"></a>Translating the questionnaire</h2>
<p>The questionnaire is translated using the <i>build-components/translation.json</i>. Please note that this integration-scenario does not support multiple languages yet. The structure of the <i>build-components/translation.json</i> file is structurally equivalent to the mechanism described in the <a href="../customization/translation.html">Extending questionnaire translations</a> chapter.</p></section><section>
<h2><a name="Theming_the_questionnaire"></a>Theming the questionnaire</h2>
<p>The questionnaire is styled using the <i>build-components/base.scss</i> file. This file contains all basic bootstrap variables as well as some CEP specific variables (at the end of the file). This file may be used to change existing SASS-variables or even to introduce new SASS-rules or overwrite existing CEP styling rules. The general workflow for theming is described in the <a href="../customization/theming.html">Theming the questionnaire</a> chapter.</p></section><section>
<h2><a name="Integrating_the_questionnaire"></a>Integrating the questionnaire</h2>
<p>In preparation to the integration, the CEP back end needs to be installed/deployed on a runtime environment that can be reached by your integrating system and is accessible by the end user. After the installation, the back end integration can be implemented as described in chapter <a href="../../integration_mechanism.html">Integration mechanism</a>.</p>
<p>In a nutshell:</p>
<ul>

<li>Configure the <code>com.hannoverre.reflex.cep.service.integration.forwardUrl</code> of the <i>cep-integration-service</i> to point to the location where the questionnaire is deployed, e.g. <code>https://www.myserver.com/cep/#/assessment/{assessmentId}?lang={language}</code>.</li>
<li>Let the <i>build-components/configuration.json</i> API-section point to the public reachable address of the deployed CEP back end services.</li>
</ul>
<p>For each assessment, your portal system needs to</p>
<ul>

<li>Initialise a CEP assessment case by calling the <b>Integration Endpoint</b>.</li>
<li>Set the returned <code>cookies</code> as HTTP-Only cookies for the calling user.</li>
<li>Forward the user to the returned <code>directUrl</code>.</li>
</ul>
<p>The forward can be implemented for example by providing a link</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;a href=&quot;{directUrl}&quot;&gt;Start Assessment&lt;/a&gt;
</pre></div></div>

<p>or by simply redirecting the user using a HTTP-Redirect.</p>
<p>Please refer to the chapter <a href="scenario_2_angular.html">Integration Scenario 2</a> if you prefer to embed the CEP dynamic questionnaire user interface into your own web application.</p></section><section>
<h2><a name="Auto-Submit_the_questionnaire"></a>Auto-Submit the questionnaire</h2>
<p>You can implement an Angular-Directive which is provided by the questionnaire component: <b></b> This button triggers the auto submit.</p>
<p>On the other side you can trigger autosubmit with a broadcast:</p>

<div class="source">
<div class="source"><pre class="prettyprint">	function triggerAutoSubmit(){
		$rootScope.$broadcast('questionnaire:doAutoSubmit');
	}
</pre></div></div></section>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2020.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
