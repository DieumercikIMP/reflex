<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 at 2020-09-25 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200925" />
    <meta http-equiv="Content-Language" content="en" />
    <title>ReFlex ReFlex Integrator's Handbook &#x2013; Installation guide</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://www.hannover-re.com/" id="bannerLeft">
                                                                                                <img src="images/logo.svg"  alt="HannoverRe"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="https://www.hannover-re.com/" id="bannerRight">
                                                                                                <img src="images/hre-logo.svg"  alt="HannoverRe_log"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 15.0.0
                    </li>
              
              
                  <li id="publishDate" class="pull-right">Last Published: 2020-09-25</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                          
      <li>
  
                          <a href="index.html" title="Document Information">
          <span class="none"></span>
        Document Information</a>
            </li>
                                                                                                                                                            
      <li>
  
                          <a href="reflex-overview/index.html" title="ReFlex Overview">
          <span class="icon-chevron-right"></span>
        ReFlex Overview</a>
                  </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Installation Guide</a>
          </li>
                                                                                                      
      <li>
  
                          <a href="update-guide/index.html" title="Update Guide">
          <span class="icon-chevron-right"></span>
        Update Guide</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="use-cases/index.html" title="Use Cases">
          <span class="icon-chevron-right"></span>
        Use Cases</a>
                  </li>
                              <li class="nav-header">RAS documentation</li>
                              
      <li>
  
                          <a href="ras/overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="ras/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                                                                                                      
      <li>
  
                          <a href="ras/general-notes/index.html" title="General Notes">
          <span class="icon-chevron-right"></span>
        General Notes</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="ras/rest-resources/index.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="ras/usage-scenarios/index.html" title="Usage Scenarios">
          <span class="icon-chevron-right"></span>
        Usage Scenarios</a>
                  </li>
                                                                                                                                          
      <li>
  
                          <a href="ras/known-issues/index.html" title="Known Issues">
          <span class="icon-chevron-right"></span>
        Known Issues</a>
                  </li>
                              <li class="nav-header">CEP documentation</li>
                              
      <li>
  
                          <a href="cep/integration/integration_mechanism.html" title="Integration Mechanism">
          <span class="none"></span>
        Integration Mechanism</a>
            </li>
                                                                                                                                                                                          
      <li>
  
                          <a href="cep/integration/backend/index.html" title="Back End Integration">
          <span class="icon-chevron-right"></span>
        Back End Integration</a>
                  </li>
                                                                                                                                                                                                                        
      <li>
  
                          <a href="cep/integration/frontend/index.html" title="Front End Integration">
          <span class="icon-chevron-right"></span>
        Front End Integration</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="cep/integration/features/index.html" title="Optional Features">
          <span class="icon-chevron-right"></span>
        Optional Features</a>
                  </li>
                                                                                                                              
      <li>
  
                          <a href="cep/integration/operations/index.html" title="Operations">
          <span class="icon-chevron-right"></span>
        Operations</a>
                  </li>
                
      <li>
  
                          <a href="cep/integration/known_issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">DCS documentation</li>
                              
      <li>
  
                          <a href="dcs/index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="dcs/configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="dcs/rest-api.html" title="REST API">
          <span class="none"></span>
        REST API</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="dcs/template-config/template-configuration.html" title="Template Configuration">
          <span class="icon-chevron-right"></span>
        Template Configuration</a>
                  </li>
                
      <li>
  
                          <a href="dcs/known-issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">RSP documentation</li>
                                                                                                                                                        
      <li>
  
                          <a href="rsp/integration/integration.html" title="Integration">
          <span class="icon-chevron-right"></span>
        Integration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="rsp/configuration/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                              <li class="nav-header">MI documentation</li>
                              
      <li>
  
                          <a href="mi/installation/app-queue.html" title="AppQueue Installation">
          <span class="none"></span>
        AppQueue Installation</a>
            </li>
                                                                                    
      <li>
  
                          <a href="mi/index.html" title="Data export">
          <span class="icon-chevron-right"></span>
        Data export</a>
                  </li>
                              <li class="nav-header">3PS documentation</li>
                              
      <li>
  
                          <a href="tps/overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                                                                        
      <li>
  
                          <a href="tps/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="tps/api.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                              <li class="nav-header">UWB documentation</li>
                              
      <li>
  
                          <a href="uwb/index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                  
      <li>
  
                          <a href="uwb/installation/index.html" title="Installation">
          <span class="icon-chevron-right"></span>
        Installation</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="uwb/configuration/application/index.html" title="Application Configuration">
          <span class="icon-chevron-right"></span>
        Application Configuration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="uwb/configuration/office/index.html" title="Office Configuration">
          <span class="icon-chevron-right"></span>
        Office Configuration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="uwb/features/index.html" title="Advanced Features">
          <span class="icon-chevron-right"></span>
        Advanced Features</a>
                  </li>
                                                                  
      <li>
  
                          <a href="uwb/operations/index.html" title="Operations">
          <span class="icon-chevron-right"></span>
        Operations</a>
                  </li>
                
      <li>
  
                          <a href="uwb/known_issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">MIGRATION documentation</li>
                              
      <li>
  
                          <a href="migration/index.html" title="User Guide">
          <span class="none"></span>
        User Guide</a>
            </li>
                              <li class="nav-header">Appendix</li>
                              
      <li>
  
                          <a href="glossary.html" title="Glossary">
          <span class="none"></span>
        Glossary</a>
            </li>
                
      <li>
  
                          <a href="component-versions.html" title="Component Versions">
          <span class="none"></span>
        Component Versions</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="release-migration-notes.html" title="Release And Migration Notes">
          <span class="icon-chevron-right"></span>
        Release And Migration Notes</a>
                  </li>
                
      <li>
  
                          <a href="changelog.html" title="Changelog">
          <span class="none"></span>
        Changelog</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Installation guide</h1>
<p>This document describes the necessary steps to install the delivered ReFlex components to a clean environment for on-premises as well as for <a href="reflex-overview/cloud-setup.html">cloud setup</a>. If the installation should be done on an environment that already contains a ReFlex installation, please follow the <a href="update-guide/index.html">update guide</a>. Please also consult the chapters <a href="reflex-overview/architecture.html">architecture</a> and <a href="reflex-overview/security-aspects.html">security aspects</a> for further infrastructural considerations (i.e. the usage of a reverse proxy).</p>
<p>For installing and configuring UWB, please also refer to the <a href="uwb/installation/index.html">UWB installation guide</a> in the UWB chapter.</p><section>
<h2><a name="Overview"></a>Overview</h2>
<p>ReFlex web applications (e.g. RAS or any CEP Service) in general require a configuration directory. Those configuration directories are expected to be placed inside a certain root directory. This root directory has to be exposed to the ReFlex applications by assigning the path of this directory to the environment variable <i>REFLEX_CONFIG_ROOTDIR</i>. The directory itself is required to contain the same file name as the web artefact (e.g. ras-web) and should be placed inside the <i>REFLEX_CONFIG_ROOTDIR</i> that is configured during the installation, e.g.:</p>
<p><img src="images/REFLEX_CONFIG_ROOTDIR.png" alt="Structure_of_REFLEX_CONFIG_ROOTDIR" title="reflex-config as REFLEX_CONFIG_ROOTDIR" /></p>
<p>The delivery package contains the ReFlex web applications as well as their default configurations. This handbook is included within this package alongside potential change logs and further documentation. If you are using the CEP integration scenario you will find the CEP frontend components included as well. The directory will contain the following structure:</p>
<ul>

<li><b>docs:</b> contains this handbook as well as any further documentation that might be needed for the delivery package.</li>
<li><b>reflex-config:</b> contains the configuration files which are required by the ReFlex components and the KB as part of the RAS configuration.</li>
<li><b>webapps:</b> contains the artefacts which need to be deployed to an application server.</li>
</ul></section><section>
<h2><a name="Installation_steps"></a>Installation steps</h2>
<p>Follow the steps below to install the delivered ReFlex components on your system.</p><section>
<h3><a name="Step_1:_Prerequisites"></a>Step 1: Prerequisites</h3>
<p>It is assumed that JDK has been installed on the designated target server. Please see chapter <a href="reflex-overview/supported-systems.html">recommended systems</a> to gather information about recommended JDK version. The latest stable update release will be sufficient. Set environment variable <code>JAVA_HOME</code> to the installation folder of the JDK and add the folder <code>JAVA_HOME/bin</code> to the <code>PATH</code> variable.</p>
<p>Use the command <code>java -version</code> from a console to check the JDK version.</p></section><section>
<h3><a name="Step_2:_Install_application_server"></a>Step 2: Install application server</h3>
<p>ReFlex can be operated on a number of application servers. However please refer to the Recommended Systems Page for the recommended (and tested) application server versions. For more information please have a look at the <a href="reflex-overview/supported-systems.html">recommended systems</a>-page.</p>
<p>To visualize the next steps it is assumed that the installation will be done on a Apache Tomcat server.</p>
<ul>

<li>The installation location of the Tomcat can be accessed by using the environment variable <i>CATALINA_HOME</i>.</li>
<li>Make sure that the path does not contain any whitespaces.</li>
</ul></section><section>
<h3><a name="Step_3:_Configuration"></a>Step 3: Configuration</h3>
<p>a) Create a directory to dump heap information in case of memory errors, later referenced as <code>&lt;heap.dump.dir&gt;</code>. Ensure that the specified file system has enough free space to hold the content of the configured memory size (e.g. 4 GB).</p>
<p>b) If you are using a Linux or Unix please create a <code>&lt;server.home.dir&gt;/bin/setenv.sh</code> file and add the following lines (replace <code>&lt;heap.dump.dir&gt;</code> placeholder):</p>

<div class="source">
<div class="source"><pre class="prettyprint"># Environment parameters used by ReFlex
export CATALINA_OPTS=&quot;-Xms512M -Xmx4096M -Dfile.encoding=UTF-8&quot;
export REFLEX_CONFIG_ROOTDIR=$CATALINA_HOME/reflex-config
export REFLEX_LOG_ROOTDIR=$CATALINA_HOME/logs

# dump memory content in case of memory error
export CATALINA_OPTS=&quot;${CATALINA_OPTS} -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=&lt;heap.dump.dir&gt;&quot;
</pre></div></div>

<p>In case you are using a Windows operating system to run ReFlex create a  <code>&lt;server.home.dir&gt;\bin\setenv.bat</code> file and add the following lines (replace <code>&lt;heap.dump.dir&gt;</code> placeholder):</p>

<div class="source">
<div class="source"><pre class="prettyprint">REM Environment parameters used by ReFlex
set &quot;CATALINA_OPTS=-Xms512M -Xmx4096M -XX:MaxPermSize=512M -Dfile.encoding=UTF-8&quot;
set &quot;REFLEX_CONFIG_ROOTDIR=%CATALINA_HOME%\reflex-config&quot;
set &quot;REFLEX_LOG_ROOTDIR=%CATALINA_HOME%\logs&quot;

REM dump memory content in case of memory error
set &quot;CATALINA_OPTS=%CATALINA_OPTS% -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=&lt;heap.dump.dir&gt;&quot;
</pre></div></div>

<p>During the startup of the server, the <i>setenv.sh/setenv.bat</i> is automatically called by the <i>catalina.sh/catalina.bat</i>.</p>
<blockquote>

<p>This assumes that the ReFlex configuration directory is placed inside the <i>CATALINA_HOME</i> directory. If you want to rename it and/or place it in a different location please adjust the path of the <i>REFLEX_CONFIG_ROOTDIR</i> accordingly.</p>
</blockquote>
<p>c) Copy the contents of the directory <code>reflex-config</code> of your delivery package to your configured <i>REFLEX_CONFIG_ROOTDIR</i>. Adjust the configuration of the ReFlex artifacts according to your environment&#x2019;s requirements.</p>
<blockquote>

<p>The access to RAS is restricted by basic access authentication. The default credentials are configured (BCrypt) inside the configuration file <i>users.properties</i>. It is recommended to change these credentials. Further details about RAS security are described in <a href="ras/configuration/security.html">RAS security</a> chapter. The default configuration file <i>users.properties</i> is no longer provided in the distributed configuration package.</p>
</blockquote>
<p>d) Verify that the used connector inside the Tomcat&#x2019;s &#x2018;&lt;server.home.dir&gt;/conf/server.xml&#x2019; contains the parameter <i>URIEncoding</i>. The value should be set to <i>UTF-8</i>, e.g.:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;
          URIEncoding=&quot;UTF-8&quot;
          connectionTimeout=&quot;20000&quot;
          redirectPort=&quot;8443&quot; /&gt;
</pre></div></div>

<p>e) Verify that the port for the Tomcat is not used by another application.</p></section><section>
<h3><a name="Step_4:_Deployment"></a>Step 4: Deployment</h3>
<p>Copy all files from the <code>webapps</code> folder of your hr|ReFlex delivery to the <code>&lt;server.home.dir&gt;/webapps</code> directory.</p></section><section>
<h3><a name="Step_5:_Server_start"></a>Step 5: Server start</h3>
<p>Start the tomcat by executing <code>&lt;server.home.dir&gt;/bin/startup.sh</code> on a UNIX like OS or execute <code>&lt;server.home.dir&gt;/bin/startup.bat</code> on a Windows operating system.</p></section><section>
<h3><a name="Step_6:_Verify_installations"></a>Step 6: Verify installations</h3><section>
<h4><a name="RAS"></a>RAS</h4>
<p>Open a browser and set up an HTTP request</p>
<p><code>http://localhost:8080/ras-web/rs/knowledgebases</code></p>
<p>You are asked for your credentials first. Please insert the values that you have configured in Step 3c.</p>
<p>Next, you should see a JSON text output on your browser window similar to the following one.</p>

<div class="source">
<div class="source"><pre class="prettyprint">...
{
  &quot;knowledgeBases&quot;: [
    {
      &quot;knowledgeBaseId&quot;: &quot;KnowledgeBase&quot;,
      &quot;knowledgeBaseName&quot;: &quot;CEP Integration KB&quot;,
      &quot;cedentId&quot;: &quot;cedentId&quot;,
      &quot;cedentName&quot;: &quot;CEP&quot;,
      &quot;versions&quot;: {
        &quot;latest&quot;: {
          &quot;version&quot;: &#x201c;1.6.0.RELEASE&#x201d;,
          &quot;infoText&quot;: &quot;Knowledgebase for some client&quot;,
          &quot;creationDate&quot;: &quot;2017-06-20T08:21:42+0200&quot;,
          &quot;creator&quot;: &quot;knowledgebase.somename&quot;,
          &quot;links&quot;: [{
          &quot;href&quot;: &quot;/rs/knowledgebases/somename/versions/1-6-0-RELEASE&quot;,
          &quot;rel&quot;: [&quot;knowledgebase-status&quot;,
          &quot;self&quot;],
          &quot;method&quot;: &quot;GET&quot;
      },
  &#x2026;
} 
...
</pre></div></div>
</section><section>
<h4><a name="DCS"></a>DCS</h4>
<p>Open a browser and set up a HTTP request</p>
<p><code>http://localhost:8080/dcs/status</code></p>
<p>The response should return the version number of the installed application as well as the names of the installed pipelines. For example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
	&quot;version&quot;: &quot;1.23.0&quot;,
	&quot;pipelines&quot;: [&quot;sample-application&quot;]
}
</pre></div></div>
</section><section>
<h4><a name="CEP"></a>CEP</h4>
<p>Open a browser and set up a HTTP request</p>
<p><code>http://localhost:8080/cep-core/status</code></p>
<p>The response should return the version number of the installed application and a 200 available status. For example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">{&quot;id&quot;:{&quot;name&quot;:&quot;com.hannoverre.reflex.cep.core&quot;,&quot;version&quot;:&quot;8.0.1&quot;},&quot;status&quot;:{&quot;code&quot;:&quot;200&quot;,&quot;name&quot;:&quot;available&quot;}}
</pre></div></div>
</section><section>
<h4><a name="a3PS"></a>3PS</h4>
<p>Open a browser and set up a HTTP request</p>
<p><code>http://localhost:8080/tps-adapter/check</code></p>
<p>If the installation was successful you should get a return code 200.</p></section><section>
<h4><a name="Enhanced_logging_.28optional_-_for_Tomcat_installation_only.29"></a>Enhanced logging (optional - for Tomcat installation only)</h4>
<p>In case of requiring additional logging information e.g. to track timestamps of inbound/outbound requests<br />
you can configure your server by adjusting its <code>server.xml</code> as follows:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;Server&gt;...  
 &lt;Service&gt;...  
  &lt;Engine&gt;...  
   &lt;Host&gt;...  
   

        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;  
               prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot;  
               pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b (%D ms)&quot; /&gt; 


</pre></div></div>

<p>With inserting (%D ms) at the end of the pattern you will get request/response duration appended to log row in &#x201c;/apache-tomcat-x.x.x/logs/localhost_access_log&#x201d; like</p>

<div class="source">
<div class="source"><pre class="prettyprint">  [20/Jan/2019:10:19:38 +0100] &quot;GET /ras-web/rs/ HTTP/1.1&quot; 200 22279 (11 ms).
</pre></div></div>

<p>Additionally you can take a look at the Tomcat documentation.</p>
<p>By default you can find the access log file where the cycle times should be logged under CATALINA_HOME/logs.</p></section></section></section><section>
<h2><a name="Next_steps"></a>Next steps</h2>
<p>After installing the delivered ReFlex components the integration phase into the client&#x2019;s system starts. This integration is depending on your integration scenario. In case you are using the RAS integration scenario, you have to connect the client system to the RAS by using the provided <a href="ras/rest-resources/index.html">REST-API</a>.</p>
<p>If you are using the CEP integration scenario, you have to integrate the delivered CEP questionnaire. This component is only shipped to you if you have chosen this integration path. The CEP integration is described in the <a href="cep/integration/frontend/index.html">CEP front end integration section</a> of the document.</p>
<p>If you chose the RSP integration scenario, you have to integrate the RSP into your own web portal. You can find further information in the <a href="rsp/integration/integration.html">integration guide for RSP</a>.</p>
<p>Additionally, you can find further information about the optional ReFlex components:</p>
<ul>

<li><a href="dcs/index.html">DCS</a></li>
<li><a href="uwb/installation/index.html">UWB</a></li>
<li><a href="mi/installation/app-queue.html">MI</a></li>
<li><a href="tps/overview.html">Third party data service</a></li>
</ul></section>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2020.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
