<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 at 2020-09-25 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200925" />
    <meta http-equiv="Content-Language" content="en" />
    <title>ReFlex ReFlex Integrator's Handbook &#x2013; Security</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://www.hannover-re.com/" id="bannerLeft">
                                                                                                <img src="../../images/logo.svg"  alt="HannoverRe"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="https://www.hannover-re.com/" id="bannerRight">
                                                                                                <img src="../../images/hre-logo.svg"  alt="HannoverRe_log"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 15.0.0
                    </li>
              
              
                  <li id="publishDate" class="pull-right">Last Published: 2020-09-25</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                          
      <li>
  
                          <a href="../../index.html" title="Document Information">
          <span class="none"></span>
        Document Information</a>
            </li>
                                                                                                                                                            
      <li>
  
                          <a href="../../reflex-overview/index.html" title="ReFlex Overview">
          <span class="icon-chevron-right"></span>
        ReFlex Overview</a>
                  </li>
                
      <li>
  
                          <a href="../../installation-guide.html" title="Installation Guide">
          <span class="none"></span>
        Installation Guide</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../update-guide/index.html" title="Update Guide">
          <span class="icon-chevron-right"></span>
        Update Guide</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="../../use-cases/index.html" title="Use Cases">
          <span class="icon-chevron-right"></span>
        Use Cases</a>
                  </li>
                              <li class="nav-header">RAS documentation</li>
                              
      <li>
  
                          <a href="../../ras/overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                                                                
      <li>
  
                          <a href="../../ras/configuration.html" title="Configuration">
          <span class="icon-chevron-down"></span>
        Configuration</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../../ras/configuration/sample-configuration.html" title="Sample Configuration">
          <span class="none"></span>
        Sample Configuration</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/configuration/logging.html" title="Logging">
          <span class="none"></span>
        Logging</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Security</a>
          </li>
              </ul>
        </li>
                                                                                                      
      <li>
  
                          <a href="../../ras/general-notes/index.html" title="General Notes">
          <span class="icon-chevron-right"></span>
        General Notes</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="../../ras/rest-resources/index.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="../../ras/usage-scenarios/index.html" title="Usage Scenarios">
          <span class="icon-chevron-right"></span>
        Usage Scenarios</a>
                  </li>
                                                                                                                                          
      <li>
  
                          <a href="../../ras/known-issues/index.html" title="Known Issues">
          <span class="icon-chevron-right"></span>
        Known Issues</a>
                  </li>
                              <li class="nav-header">CEP documentation</li>
                              
      <li>
  
                          <a href="../../cep/integration/integration_mechanism.html" title="Integration Mechanism">
          <span class="none"></span>
        Integration Mechanism</a>
            </li>
                                                                                                                                                                                          
      <li>
  
                          <a href="../../cep/integration/backend/index.html" title="Back End Integration">
          <span class="icon-chevron-right"></span>
        Back End Integration</a>
                  </li>
                                                                                                                                                                                                                        
      <li>
  
                          <a href="../../cep/integration/frontend/index.html" title="Front End Integration">
          <span class="icon-chevron-right"></span>
        Front End Integration</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="../../cep/integration/features/index.html" title="Optional Features">
          <span class="icon-chevron-right"></span>
        Optional Features</a>
                  </li>
                                                                                                                              
      <li>
  
                          <a href="../../cep/integration/operations/index.html" title="Operations">
          <span class="icon-chevron-right"></span>
        Operations</a>
                  </li>
                
      <li>
  
                          <a href="../../cep/integration/known_issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">DCS documentation</li>
                              
      <li>
  
                          <a href="../../dcs/index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="../../dcs/configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="../../dcs/rest-api.html" title="REST API">
          <span class="none"></span>
        REST API</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../dcs/template-config/template-configuration.html" title="Template Configuration">
          <span class="icon-chevron-right"></span>
        Template Configuration</a>
                  </li>
                
      <li>
  
                          <a href="../../dcs/known-issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">RSP documentation</li>
                                                                                                                                                        
      <li>
  
                          <a href="../../rsp/integration/integration.html" title="Integration">
          <span class="icon-chevron-right"></span>
        Integration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../rsp/configuration/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                              <li class="nav-header">MI documentation</li>
                              
      <li>
  
                          <a href="../../mi/installation/app-queue.html" title="AppQueue Installation">
          <span class="none"></span>
        AppQueue Installation</a>
            </li>
                                                                                    
      <li>
  
                          <a href="../../mi/index.html" title="Data export">
          <span class="icon-chevron-right"></span>
        Data export</a>
                  </li>
                              <li class="nav-header">3PS documentation</li>
                              
      <li>
  
                          <a href="../../tps/overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                                                                        
      <li>
  
                          <a href="../../tps/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="../../tps/api.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                              <li class="nav-header">UWB documentation</li>
                              
      <li>
  
                          <a href="../../uwb/index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                  
      <li>
  
                          <a href="../../uwb/installation/index.html" title="Installation">
          <span class="icon-chevron-right"></span>
        Installation</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="../../uwb/configuration/application/index.html" title="Application Configuration">
          <span class="icon-chevron-right"></span>
        Application Configuration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../uwb/configuration/office/index.html" title="Office Configuration">
          <span class="icon-chevron-right"></span>
        Office Configuration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../uwb/features/index.html" title="Advanced Features">
          <span class="icon-chevron-right"></span>
        Advanced Features</a>
                  </li>
                                                                  
      <li>
  
                          <a href="../../uwb/operations/index.html" title="Operations">
          <span class="icon-chevron-right"></span>
        Operations</a>
                  </li>
                
      <li>
  
                          <a href="../../uwb/known_issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">MIGRATION documentation</li>
                              
      <li>
  
                          <a href="../../migration/index.html" title="User Guide">
          <span class="none"></span>
        User Guide</a>
            </li>
                              <li class="nav-header">Appendix</li>
                              
      <li>
  
                          <a href="../../glossary.html" title="Glossary">
          <span class="none"></span>
        Glossary</a>
            </li>
                
      <li>
  
                          <a href="../../component-versions.html" title="Component Versions">
          <span class="none"></span>
        Component Versions</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="../../release-migration-notes.html" title="Release And Migration Notes">
          <span class="icon-chevron-right"></span>
        Release And Migration Notes</a>
                  </li>
                
      <li>
  
                          <a href="../../changelog.html" title="Changelog">
          <span class="none"></span>
        Changelog</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Security</h1>
<p>In addition to the general security aspects of the ReFlex-stack there are some best practices for operating the RAS in a potentially unsafe environment.</p><section>
<h2><a name="Restricted_access"></a>Restricted access</h2>
<p>The access to the RAS-webservices is restricted to authenticated users. Each request must contain a user name and password for basic-authentication, requests without a valid authentication are rejected with an <code>HTTP 401 Unauthorized</code>.<br />
The configuration for the authentication is done in the file <code>users.properties</code> in the directory <code>&lt;component.dir&gt;</code> of the <code>REFLEX_CONFIG_ROOTDIR</code> directory. The file must contain the values for the <code>com.hannoverre.reflex.ras.username</code> in plain-text and the <code>com.hannoverre.reflex.ras.password</code> hashed with BCRYPT.</p><section>
<h3><a name="Sample_users.properties"></a>Sample users.properties</h3>

<div class="source">
<div class="source"><pre class="prettyprint">com.hannoverre.reflex.ras.username=user
com.hannoverre.reflex.ras.password=$2a$05$7Fm6huRHF/iiFjPWlm4HgOuQoTr8A7PcRMXDo57AgsmST/azL/s0K
</pre></div></div>
</section><section>
<h3><a name="How_to_create_a_secure_password_with_the_apache_htpasswd_software"></a>How to create a secure password with the apache htpasswd software</h3>
<blockquote>

<p>NOTE: The <code>htpasswd</code> software is part of the <a class="externalLink" href="https://httpd.apache.org/docs/2.4/programs/htpasswd.html">Apache HTTP Server Project</a> and contained in the the binary distribution of the server</p>
</blockquote>
<p>Run the <code>htpasswd</code> command with the parameters <code>-n</code> for writing the password to stdout, <code>-b</code> for reading the password from a parameter instead of stdin, and <code>-B</code> to use BCRYPT, and not SHA.</p>
<p><i>The revision string <b><code>$2y$</code></b> in the hash must be replaced by <b><code>$2a$</code></b> when inserting the encoded password into the <code>users.properties</code> file.</i></p>

<div class="source">
<div class="source"><pre class="prettyprint">$ htpasswd -n -b -B user password
user:$2y$05$c/xhewsSacb0lQZ3XPRttubbNcTEYWP9Gc60bap3EOMBwgKOmfzs.
</pre></div></div>

<p>The hash part is separated from the username in the form <code>user:&lt;hash&gt;</code>. This hash will also be different every time the command is run, because the hashing algorithm includes a <code>salt</code>. The name of the user is of no consequence for hashing the password.</p>
<blockquote>

<p><b>Note on BCrypt revisions</b>: A particular implementation of BCrypt in PHP had a bug allowing to attack the encryption algorithm. Subsequent releases of the implementation without this issue changed the revision field of BCrypt from <code>$2a$</code> to <code>$2x$</code>, and later to <code>$2y$</code>. To avoid ambiguity other implementations of BCrypt (e.g. htpasswd in apache) followed the revision update and no longer create hashes for <code>$2a$</code>. The BCrypt implementation in RAS-REST is not affected by the bug, and only supports revision <code>$2a$</code> of the hash string. The BCrypt algorithm is identical for all revisions, therefore any revision <code>$2y$</code> hashes can be repurposed to <code>$2a$</code>. But any hash created as revision <code>$2a$</code> could be suffering from the issue.</p>
</blockquote></section></section><section>
<h2><a name="Information_privacy"></a>Information privacy</h2><section>
<h3><a name="Logging_of_data"></a>Logging of data</h3>
<p>For debugging possible errors and to facilitate the integration with other systems a servlet-filter can be enabled to <a href="logging.html">log all incoming and outgoing requests</a> including their bodies. The body contains all assessment-data in plain-text, whoever has access to the log-files could read sensitive data! In general log-levels like TRACE, DEBUG and INFO should not be used other than for debugging errors as sensitive data could be logged.<br />
For security reasons it&#x2019;s recommended to disable the logging of request-data, to configure a log-level like WARN or even ERROR, and to restrict the access to the log-files as much as possible.</p></section><section>
<h3><a name="Hiding_of_error_details"></a>Hiding of error details</h3>
<p>When integrating other systems to the RAS it is helpful to get some details if errors occur. If for example the RAS responds with an <code>HTTP 400 Bad Request</code> the details in the response body state why the request is considered to be invalid and therefore rejected. But these details might help attackers to find vulnerabilities in the application or the setup as well. The RAS comes with a special servlet-filter to remove the response body in case of an HTTP response with a code greater than or equal 400. By default this filter is active and can be disabled in the file <code>config.properties</code> in the directory <code>&lt;component.dir&gt;</code> of the <code>REFLEX_CONFIG_ROOTDIR</code> directory. The second option of this filter is for preventing information leakage when application servers are sending an HTML page on calls of HttpServletResponse.sendError from within an application. This HTML page shows details of the application server like its version and might help attackers to find vulnerabilities. The servlet-filter delegates calls to HttpServletResponse.sendError to HttpServletResponse.setStatus and avoids the information disclosure. Both options can be enabled or disabled in the <a href="sample-configuration.html">configuration</a> by setting the values for</p>
<ul>

<li>com.hannoverre.reflex.masksenderror.enabled</li>
<li>com.hannoverre.reflex.maskresponsebody.enabled</li>
</ul>
<p>to <code>true</code>.</p></section></section><section>
<h2><a name="Recommended_production_settings"></a>Recommended production settings</h2>
<p>The summary of recommendations for running RAS in a production environment are to run only the minimal system, limit the access as much as possible and to secure the transportation of data.</p>
<ul>

<li>disable access to the endpoints for deploying and undeploying knowledge bases (POST and DELETE on <a href="../rest-resources/knowledgebases.html">knowledge bases resource</a>) on the network layer/firewall</li>
<li>use the features to hide error details by activating the servlet-filter in the configuration</li>
<li>limit the logging to errors and the access to the stored log-files responsibly</li>
<li>use SSL encryption for communicating with other systems and choose a strong password for accessing the RAS webservices</li>
</ul></section>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2020.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
