<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 at 2020-09-25 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200925" />
    <meta http-equiv="Content-Language" content="en" />
    <title>ReFlex ReFlex Integrator's Handbook &#x2013; Update externally provided data</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="https://www.hannover-re.com/" id="bannerLeft">
                                                                                                <img src="../../images/logo.svg"  alt="HannoverRe"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="https://www.hannover-re.com/" id="bannerRight">
                                                                                                <img src="../../images/hre-logo.svg"  alt="HannoverRe_log"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 15.0.0
                    </li>
              
              
                  <li id="publishDate" class="pull-right">Last Published: 2020-09-25</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                          
      <li>
  
                          <a href="../../index.html" title="Document Information">
          <span class="none"></span>
        Document Information</a>
            </li>
                                                                                                                                                            
      <li>
  
                          <a href="../../reflex-overview/index.html" title="ReFlex Overview">
          <span class="icon-chevron-right"></span>
        ReFlex Overview</a>
                  </li>
                
      <li>
  
                          <a href="../../installation-guide.html" title="Installation Guide">
          <span class="none"></span>
        Installation Guide</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../update-guide/index.html" title="Update Guide">
          <span class="icon-chevron-right"></span>
        Update Guide</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="../../use-cases/index.html" title="Use Cases">
          <span class="icon-chevron-right"></span>
        Use Cases</a>
                  </li>
                              <li class="nav-header">RAS documentation</li>
                              
      <li>
  
                          <a href="../../ras/overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../ras/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                                                                                                      
      <li>
  
                          <a href="../../ras/general-notes/index.html" title="General Notes">
          <span class="icon-chevron-right"></span>
        General Notes</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="../../ras/rest-resources/index.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                                                                                                                                                                                                                                                                
      <li>
  
                          <a href="../../ras/usage-scenarios/index.html" title="Usage Scenarios">
          <span class="icon-chevron-down"></span>
        Usage Scenarios</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/deploy-KB.html" title="Deploy a Knowledge Base">
          <span class="none"></span>
        Deploy a Knowledge Base</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/undeploy-KB.html" title="Undeploy a Knowledge Base">
          <span class="none"></span>
        Undeploy a Knowledge Base</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/list-products.html" title="List Products">
          <span class="none"></span>
        List Products</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/assessmentfactorsearch.html" title="Assessment Factor Search">
          <span class="none"></span>
        Assessment Factor Search</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/performing-riskassessment.html" title="Perform Risk Assessments">
          <span class="none"></span>
        Perform Risk Assessments</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/translate-riskassessment.html" title="Translate Risk Assessment">
          <span class="none"></span>
        Translate Risk Assessment</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/change-product-configuration.html" title="Change Product Configuration">
          <span class="none"></span>
        Change Product Configuration</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/provide-external-data.html" title="Provide External Data">
          <span class="none"></span>
        Provide External Data</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Update Externally Provided Data</a>
          </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/latest-knowledgebaseversion.html" title="Using the Latest Knowledge Base Version">
          <span class="none"></span>
        Using the Latest Knowledge Base Version</a>
            </li>
                    
      <li>
  
                          <a href="../../ras/usage-scenarios/next-unused-factor.html" title="Assessment Factor Search Question with Exposed Unused Factors">
          <span class="none"></span>
        Assessment Factor Search Question with Exposed Unused Factors</a>
            </li>
              </ul>
        </li>
                                                                                                                                          
      <li>
  
                          <a href="../../ras/known-issues/index.html" title="Known Issues">
          <span class="icon-chevron-right"></span>
        Known Issues</a>
                  </li>
                              <li class="nav-header">CEP documentation</li>
                              
      <li>
  
                          <a href="../../cep/integration/integration_mechanism.html" title="Integration Mechanism">
          <span class="none"></span>
        Integration Mechanism</a>
            </li>
                                                                                                                                                                                          
      <li>
  
                          <a href="../../cep/integration/backend/index.html" title="Back End Integration">
          <span class="icon-chevron-right"></span>
        Back End Integration</a>
                  </li>
                                                                                                                                                                                                                        
      <li>
  
                          <a href="../../cep/integration/frontend/index.html" title="Front End Integration">
          <span class="icon-chevron-right"></span>
        Front End Integration</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="../../cep/integration/features/index.html" title="Optional Features">
          <span class="icon-chevron-right"></span>
        Optional Features</a>
                  </li>
                                                                                                                              
      <li>
  
                          <a href="../../cep/integration/operations/index.html" title="Operations">
          <span class="icon-chevron-right"></span>
        Operations</a>
                  </li>
                
      <li>
  
                          <a href="../../cep/integration/known_issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">DCS documentation</li>
                              
      <li>
  
                          <a href="../../dcs/index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="../../dcs/configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                
      <li>
  
                          <a href="../../dcs/rest-api.html" title="REST API">
          <span class="none"></span>
        REST API</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="../../dcs/template-config/template-configuration.html" title="Template Configuration">
          <span class="icon-chevron-right"></span>
        Template Configuration</a>
                  </li>
                
      <li>
  
                          <a href="../../dcs/known-issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">RSP documentation</li>
                                                                                                                                                        
      <li>
  
                          <a href="../../rsp/integration/integration.html" title="Integration">
          <span class="icon-chevron-right"></span>
        Integration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../rsp/configuration/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                              <li class="nav-header">MI documentation</li>
                              
      <li>
  
                          <a href="../../mi/installation/app-queue.html" title="AppQueue Installation">
          <span class="none"></span>
        AppQueue Installation</a>
            </li>
                                                                                    
      <li>
  
                          <a href="../../mi/index.html" title="Data export">
          <span class="icon-chevron-right"></span>
        Data export</a>
                  </li>
                              <li class="nav-header">3PS documentation</li>
                              
      <li>
  
                          <a href="../../tps/overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                                                                        
      <li>
  
                          <a href="../../tps/configuration.html" title="Configuration">
          <span class="icon-chevron-right"></span>
        Configuration</a>
                  </li>
                                                                                    
      <li>
  
                          <a href="../../tps/api.html" title="REST API">
          <span class="icon-chevron-right"></span>
        REST API</a>
                  </li>
                              <li class="nav-header">UWB documentation</li>
                              
      <li>
  
                          <a href="../../uwb/index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                                                                  
      <li>
  
                          <a href="../../uwb/installation/index.html" title="Installation">
          <span class="icon-chevron-right"></span>
        Installation</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="../../uwb/configuration/application/index.html" title="Application Configuration">
          <span class="icon-chevron-right"></span>
        Application Configuration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../uwb/configuration/office/index.html" title="Office Configuration">
          <span class="icon-chevron-right"></span>
        Office Configuration</a>
                  </li>
                                                                                                                                                                                    
      <li>
  
                          <a href="../../uwb/features/index.html" title="Advanced Features">
          <span class="icon-chevron-right"></span>
        Advanced Features</a>
                  </li>
                                                                  
      <li>
  
                          <a href="../../uwb/operations/index.html" title="Operations">
          <span class="icon-chevron-right"></span>
        Operations</a>
                  </li>
                
      <li>
  
                          <a href="../../uwb/known_issues.html" title="Known Issues">
          <span class="none"></span>
        Known Issues</a>
            </li>
                              <li class="nav-header">MIGRATION documentation</li>
                              
      <li>
  
                          <a href="../../migration/index.html" title="User Guide">
          <span class="none"></span>
        User Guide</a>
            </li>
                              <li class="nav-header">Appendix</li>
                              
      <li>
  
                          <a href="../../glossary.html" title="Glossary">
          <span class="none"></span>
        Glossary</a>
            </li>
                
      <li>
  
                          <a href="../../component-versions.html" title="Component Versions">
          <span class="none"></span>
        Component Versions</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="../../release-migration-notes.html" title="Release And Migration Notes">
          <span class="icon-chevron-right"></span>
        Release And Migration Notes</a>
                  </li>
                
      <li>
  
                          <a href="../../changelog.html" title="Changelog">
          <span class="none"></span>
        Changelog</a>
            </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Update externally provided data</h1>
<p>RAS-REST does not provide a dedicated endpoint for updating <a href="../media-types/provided-data-block.html">provided data blocks</a>, but a very flexible mechanism for controlling how answers provided in provided data blocks are processed when <a href="../rest-resources/riskassessments.html#riskassessments-POST">performing a risk assessment</a>. For this, answers contained in a provided data block <a href="../media-types/provided-questionnaire.html">questionnaire section</a> support different <a href="../media-types/common/answer-data.html#properties-overwriteMode">overwrite-modes</a>.</p>
<p>The following scenarios demonstrate how overwrite-modes can be used in the context of updating provided data.</p>
<p><b>Scenarios:</b></p>
<ul>

<li><a href="#scenario-update-existing-provided-data-block">Update by modifying an existing provided data block</a></li>
<li><a href="#scenario-update-new-provided-data-block">Update by adding a new provided data block</a></li>
<li><a href="#scenario-update-applicant-answers">Update answers given by applicant</a></li>
<li><a href="#scenario-unanswer-question-of-provided-data-block">&#x201c;Un-answering&#x201d; questions of provided data blocks</a></li>
</ul>
<p><a name="scenario-update-existing-provided-data-block"></a></p><section><section>
<h3><a name="Scenario:_Update_by_modifying_an_existing_provided_data_block"></a>Scenario: Update by modifying an existing provided data block</h3>
<p>Given assessed risk assessment data with questions answered from a provided data block as shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;ApplicationDate&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: &quot;2015-01-01&quot;,
                ...
            },
            {
                &quot;id&quot;: &quot;LifeProduct.InsuranceSum&quot;,
                &quot;scope&quot;: &quot;INSURANCEPRODUCT:LifeProduct&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: 1000000,
                ...
            },
            {
                &quot;id&quot;: &quot;InsuredPerson.IsSmoker&quot;,
                &quot;scope&quot;: &quot;ASSESSMENTFACTOR:InsuredPerson&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: &quot;Yes&quot;,
                ...
            },
            ...
        ]
    },
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
        &quot;questionnaire&quot;: {
            &quot;ApplicationDate&quot;: {
                &quot;answer&quot;: &quot;2015-01-01&quot;
            },
            &quot;LifeProduct.InsuranceSum&quot;: {
                &quot;answer&quot;: 1000000
            },
            &quot;InsuredPerson.IsSmoker&quot;: {
                &quot;answer&quot;: &quot;Yes&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p>In order to update the answer provided by the &#x201c;a:CustomerPortal&#x201d; source, we modify the provided answers and specify the &#x201c;overwrite-own&#x201d; mode for the changed answers. This ensures that the provided answers will be considered for the corresponding questions that have been already answered by the &#x201c;a:CustomerPortal&#x201d; source. Then, a POST to the <a href="../rest-resources/riskassessments.html#riskassessments-POST">risk assessment</a> resource is performed as shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">POST /rs/knowledgebases/example-kb/versions/1-0-0/riskassessments
{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {...},
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
        &quot;questionnaire&quot;: {
            &quot;ApplicationDate&quot;: {
                &quot;answer&quot;: &quot;2015-02-02&quot;,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            },
            &quot;LifeProduct.InsuranceSum&quot;: {
                &quot;answer&quot;: 500000,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            },
            &quot;InsuredPerson.IsSmoker&quot;: {
                &quot;answer&quot;: &quot;No&quot;,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p>This results in the answers already given to the <code>ApplicationDate</code>, <code>InsuranceSum</code>, and <code>IsSmoker</code> questions getting updated (or better: &#x201c;overwritten&#x201d;) by the changed answers from the modified provided data block:</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;ApplicationDate&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: &quot;2015-02-02&quot;,
                ...
            },
            {
                &quot;id&quot;: &quot;LifeProduct.InsuranceSum&quot;,
                &quot;scope&quot;: &quot;INSURANCEPRODUCT:LifeProduct&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: 500000,
                ...
            },
            {
                &quot;id&quot;: &quot;InsuredPerson.IsSmoker&quot;,
                &quot;scope&quot;: &quot;ASSESSMENTFACTOR:InsuredPerson&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: &quot;No&quot;,
                ...
            },
            ...
        ]
    },
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
        &quot;questionnaire&quot;: {
            &quot;ApplicationDate&quot;: {
                &quot;answer&quot;: &quot;2015-02-02&quot;,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            },
            &quot;LifeProduct.InsuranceSum&quot;: {
                &quot;answer&quot;: 500000,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            },
            &quot;InsuredPerson.IsSmoker&quot;: {
                &quot;answer&quot;: &quot;No&quot;,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p>Note that if an answer to a question had been changed by a source different than &#x201c;a:CustomerPortal&#x201d;, this answer would not have been overwritten, because we specified the overwrite-mode &#x201c;overwrite-own&#x201d;. See scenario <i>&#x201c;<a href="#scenario-update-applicant-answers">Update answers given by applicant</a>&#x201d;</i> for an example of how to overwrite answers in those cases.</p>
<p><a name="scenario-update-new-provided-data-block"></a></p></section></section><section>
<h2><a name="Scenario:_Update_by_adding_a_new_provided_data_block"></a>Scenario: Update by adding a new provided data block</h2>
<p>In the <a href="#scenario-update-existing-provided-data-block">previous</a> scenario we updated the answer provided by the &#x201c;a:CustomerPortal&#x201d; source by modifying the answers in the corresponding provided data block. The same result can be achieved by adding a new provided data block after the existing provided data block, leaving that block untouched.</p>
<p>Given the same assessed risk assessment data as in the previous scenario:</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;ApplicationDate&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: &quot;2015-01-01&quot;,
                ...
            },
            {
                &quot;id&quot;: &quot;LifeProduct.InsuranceSum&quot;,
                &quot;scope&quot;: &quot;INSURANCEPRODUCT:LifeProduct&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: 1000000,
                ...
            },
            {
                &quot;id&quot;: &quot;InsuredPerson.IsSmoker&quot;,
                &quot;scope&quot;: &quot;ASSESSMENTFACTOR:InsuredPerson&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: &quot;Yes&quot;,
                ...
            },
            ...
        ]
    },
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
        &quot;questionnaire&quot;: {
            &quot;ApplicationDate&quot;: {
                &quot;answer&quot;: &quot;2015-01-01&quot;
            },
            &quot;LifeProduct.InsuranceSum&quot;: {
                &quot;answer&quot;: 1000000
            },
            &quot;InsuredPerson.IsSmoker&quot;: {
                &quot;answer&quot;: &quot;Yes&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p>In order to update the answer provided by the &#x201c;a:CustomerPortal&#x201d; source, add a new provided data block for the &#x201c;a:CustomerPortal&#x201d; source with changed answers an specifying the &#x201c;overwrite-own&#x201d; mode. Then, a POST to the <a href="../rest-resources/riskassessments.html#riskassessments-POST">risk assessment</a> resource is performed as shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">POST /rs/knowledgebases/example-kb/versions/1-0-0/riskassessments
{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {...},
    &quot;provided&quot;: [
        {
            &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
            &quot;questionnaire&quot;: {
                &quot;ApplicationDate&quot;: {
                    &quot;answer&quot;: &quot;2015-01-01&quot;
                },
                &quot;LifeProduct.InsuranceSum&quot;: {
                    &quot;answer&quot;: 1000000
                },
                &quot;InsuredPerson.IsSmoker&quot;: {
                    &quot;answer&quot;: &quot;Yes&quot;
                }
            }
        },
        {
            &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
            &quot;questionnaire&quot;: {
                &quot;ApplicationDate&quot;: {
                    &quot;answer&quot;: &quot;2015-02-02&quot;,
                    &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
                },
                &quot;LifeProduct.InsuranceSum&quot;: {
                    &quot;answer&quot;: 500000,
                    &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
                },
                &quot;InsuredPerson.IsSmoker&quot;: {
                    &quot;answer&quot;: &quot;No&quot;,
                    &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
                }
            }
        }
    ],
    ...
}
</pre></div></div>

<p>This results in the answers already given to the <code>ApplicationDate</code>, <code>InsuranceSum</code>, and <code>IsSmoker</code> questions getting updated (or better: &#x201c;overwritten&#x201d;) by the answers from the newly provided data block:</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;ApplicationDate&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: &quot;2015-02-02&quot;,
                ...
            },
            {
                &quot;id&quot;: &quot;LifeProduct.InsuranceSum&quot;,
                &quot;scope&quot;: &quot;INSURANCEPRODUCT:LifeProduct&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: 500000,
                ...
            },
            {
                &quot;id&quot;: &quot;InsuredPerson.IsSmoker&quot;,
                &quot;scope&quot;: &quot;ASSESSMENTFACTOR:InsuredPerson&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: &quot;No&quot;,
                ...
            },
            ...
        ]
    },
    &quot;provided&quot;: [
        {
            &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
            &quot;questionnaire&quot;: {
                &quot;ApplicationDate&quot;: {
                    &quot;answer&quot;: &quot;2015-01-01&quot;
                },
                &quot;LifeProduct.InsuranceSum&quot;: {
                    &quot;answer&quot;: 1000000
                },
                &quot;InsuredPerson.IsSmoker&quot;: {
                    &quot;answer&quot;: &quot;Yes&quot;
                }
            }
        },
        {
            &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
            &quot;questionnaire&quot;: {
                &quot;ApplicationDate&quot;: {
                    &quot;answer&quot;: &quot;2015-02-02&quot;,
                    &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
                },
                &quot;LifeProduct.InsuranceSum&quot;: {
                    &quot;answer&quot;: 500000,
                    &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
                },
                &quot;InsuredPerson.IsSmoker&quot;: {
                    &quot;answer&quot;: &quot;No&quot;,
                    &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
                }
            }
        }
    ],
    ...
}
</pre></div></div>

<p>Note that if an answer to a question had been changed by a source different than &#x201c;a:CustomerPortal&#x201d;, this answer would not have been overwritten, because we specified the overwrite-mode &#x201c;overwrite-own&#x201d;. See scenario <i>&#x201c;<a href="#scenario-update-applicant-answers">Update answers given by applicant</a>&#x201d;</i> for an example of how to overwrite answers in those cases.</p>
<p><a name="scenario-update-applicant-answers"></a></p></section><section>
<h2><a name="Scenario:_Update_answers_given_by_applicant"></a>Scenario: Update answers given by applicant</h2>
<p>In order to update answers given to questions by a source other than the providing source, the overwrite-mode &#x201c;overwrite-all&#x201d; must be used.</p>
<p>Given assessed risk assessment data as shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;InsuredPerson.IsSmoker&quot;,
                &quot;scope&quot;: &quot;ASSESSMENTFACTOR:InsuredPerson&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;anonymous:Applicant&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: &quot;No&quot;,
                ...
            },
            ...
        ]
    },
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
        &quot;questionnaire&quot;: {
            &quot;InsuredPerson.IsSmoker&quot;: {
                &quot;answer&quot;: &quot;Yes&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p>Here the <code>IsSmoker</code> question was initially answered from the provided data block with &#x201c;Yes&#x201d;, but that answer has been changed afterwards to &#x201c;No&#x201d; by an applicant.</p>
<p>In order to update the answer provided by the &#x201c;a:CustomerPortal&#x201d; source thereby enforcing that the answer to the question changed by the applicant gets overwritten, we modify the provided answer by setting the overwrite-mode to &#x201c;overwrite-all&#x201d; (Note, that we also could have added a new provided data block after the existing block). Then, a POST to the <a href="../rest-resources/riskassessments.html#riskassessments-POST">risk assessment</a> resource is performed as shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">POST /rs/knowledgebases/example-kb/versions/1-0-0/riskassessments
{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {...},
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
        &quot;questionnaire&quot;: {
            &quot;InsuredPerson.IsSmoker&quot;: {
                &quot;answer&quot;: &quot;Yes&quot;,
                &quot;overwriteMode&quot;: &quot;overwrite-all&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p>This results in the answer given to the <code>IsSmoker</code> question by the applicant getting updated (or better: &#x201c;overwritten&#x201d;) by the answer from the provided data block - which would not have happened if we specified &#x201c;overwrite-own&#x201d; mode:</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;InsuredPerson.IsSmoker&quot;,
                &quot;scope&quot;: &quot;ASSESSMENTFACTOR:InsuredPerson&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;a:CustomerPortal&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: &quot;Yes&quot;,
                ...
            },
            ...
        ]
    },
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
        &quot;questionnaire&quot;: {
            &quot;InsuredPerson.IsSmoker&quot;: {
                &quot;answer&quot;: &quot;Yes&quot;,
                &quot;overwriteMode&quot;: &quot;overwrite-all&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p><b>Caution:</b> The &#x201c;overwrite-all&#x201d; mode should be used with care, since it prevents that answers of questions contained in a questionnaire effectively can be changed. Given the example above, if the applicant would change the answer for the <code>IsSmoker</code> back to &#x201c;No&#x201d;, it would get overwritten again to &#x201c;Yes&#x201d; by the answer in the provided data block, next time a risk assessment is performed.</p>
<p><a name="scenario-unanswer-question-of-provided-data-block"></a></p></section><section>
<h2><a name="Scenario:_.E2.80.9CUn-answering.E2.80.9D_questions_of_provided_data_blocks"></a>Scenario: &#x201c;Un-answering&#x201d; questions of provided data blocks</h2>
<p>It is possible to set the answer for a question to a &#x201c;no-answer&#x201d; value from within a provided data block. This is equivalent to e.g. an applicant explicitly un-answering a question in the sense of removing an answer.</p>
<p>Given assessed risk assessment data with questions answered from a provided data block as shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;CreditRankingVerified&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;schufa:3PS&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: &quot;Yes&quot;,
                ...
            },
            {
                &quot;id&quot;: &quot;CreditScore&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;schufa:3PS&quot;, &quot;timestamp&quot;: &quot;2015-01-01T00:00:00&quot; },
                &quot;answer&quot;: 97.8,
                ...
            },
            ...
        ]
    },
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;a&quot;, &quot;type&quot;: &quot;CustomerPortal&quot;},
        &quot;questionnaire&quot;: {
            &quot;CreditRankingVerified&quot;: {
                &quot;answer&quot;: &quot;Yes&quot;
            },
            &quot;CreditScore&quot;: {
                &quot;answer&quot;: &quot;97.8
            }
        }
    }],
    ...
}
</pre></div></div>

<p>In order to &#x201c;un-answer&#x201d; the <code>CreditScore</code> question answered by the &#x201c;a:CustomerPortal&#x201d; source, we change the provided answer value to <code>null</code> and specify the &#x201c;overwrite-own&#x201d; mode for that answer. Further, we change the provided answer for the <code>CreditRankingVerified</code> question to &#x201c;No&#x201d; and also specify the &#x201c;overwrite-own&#x201d; mode. Then, a POST to the <a href="../rest-resources/riskassessments.html#riskassessments-POST">risk assessment</a> resource is performed as shown below.</p>

<div class="source">
<div class="source"><pre class="prettyprint">POST /rs/knowledgebases/example-kb/versions/1-0-0/riskassessments
{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {...},
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;schufa&quot;, &quot;type&quot;: &quot;3PS&quot;},
        &quot;questionnaire&quot;: {
            &quot;CreditRankingVerified&quot;: {
                &quot;answer&quot;: &quot;No&quot;,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            },
            &quot;CreditScore&quot;: {
                &quot;answer&quot;: null,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p>This results in the answer given to the <code>CreditRankingVerified</code> question getting updated (or better: &#x201c;overwritten&#x201d;) to &#x201c;No&#x201d;, as well as the answer to the <code>CreditScore</code> question getting removed:</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;products&quot;: [{&quot;id&quot;: &quot;LifeProduct&quot;, ... }],
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;CreditRankingVerified&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;schufa:3PS&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: &quot;No&quot;,
                ...
            },
            {
                &quot;id&quot;: &quot;CreditScore&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;schufa:3PS&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                // no &quot;answer&quot; property!
                ...
            },
            ...
        ]
    },
    &quot;provided&quot;: [{
        &quot;source&quot;: {&quot;id&quot;: &quot;schufa&quot;, &quot;type&quot;: &quot;3PS&quot;},
        &quot;questionnaire&quot;: {
            &quot;CreditRankingVerified&quot;: {
                &quot;answer&quot;: &quot;No&quot;,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            },
            &quot;CreditScore&quot;: {
                &quot;answer&quot;: null,
                &quot;overwriteMode&quot;: &quot;overwrite-own&quot;
            }
        }
    }],
    ...
}
</pre></div></div>

<p>Note, that the <code>answerModification</code> for the <code>CreditScore</code> question is still present and its <code>timestamp</code> has been updated. This reflects the fact that the answer has been explicitly removed, which is considered to be a modification of the answer given to the question.</p>
<p>Removing an answer given to a question using provided data blocks is a feature that should be rarely used. Generally, doing this makes sense only for optional questions or reflexive questions that need to be conditionally answered only if a certain answer has been given to a preceding question.</p>
<p>Considering the example above, a much more sustainable solution would be to have a rule in the knowledge base that only &#x201c;asks&#x201d; for a credit score if the credit ranking has been verified, e.g.:</p>

<div class="source">
<div class="source"><pre class="prettyprint">if CreditRankingVerified then require CreditScore
</pre></div></div>

<p>In this case the <code>CreditScore</code> would not need to be &#x201c;un-answered&#x201d; at all, since it would not be &#x201c;asked&#x201d; when the <code>CreditRankingVerified</code> questions gets answered with &#x201c;No&#x201d;, resulting in the following questionnaire:</p>

<div class="source">
<div class="source"><pre class="prettyprint">{
    ...,
    &quot;questionnaire&quot;: {
        &quot;questions&quot;: [
            {
                &quot;id&quot;: &quot;CreditRankingVerified&quot;,
                &quot;scope&quot;: &quot;GLOBAL&quot;,
                &quot;answerModification&quot;: { &quot;source&quot;: &quot;schufa:3PS&quot;, &quot;timestamp&quot;: &quot;2015-02-02T12:01:01&quot; },
                &quot;answer&quot;: &quot;No&quot;,
                ...
            }
    },
    ...
}
</pre></div></div>

<p><b>Caution:</b> Especially the combination of un-answering a question using the overwrite-mode &#x201c;overwrite-all&#x201d; is highly risky, since this may lead to situations where an assessment can never be completed due to unanswered questions.</p></section>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                   2020.
          All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
